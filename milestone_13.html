<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
	
	
<head>
	<title>Milestone #9</title>
    <script type="text/javascript" src="http://openlayers.org/api/OpenLayers.js"></script>
    <script type="text/javascript">
      
        var lon = -114.15199;
        var lat = 40.35459;
        var zoom = 6;
        var myProjection = new OpenLayers.Projection("EPSG:4326")
        var map;
        var Layers = new Object();
      
        function init(){
             
            map = new OpenLayers.Map('map',
            	{
            		numZoomLevels: 20 
            	});
	   Layers.usImagery = new OpenLayers.Layer.WMS( 
            	"US Imagery Tile Service - USGS", 
            	"http://basemap.nationalmap.gov/arcgis/services/USGSImageryTopo/MapServer/WmsServer?",
            	{layers: "0", version: '1.3.0', transparent: 'TRUE'},
            	{isBaseLayer: true}
            );
            map.addLayer(Layers.usImagery)
            
            Layers.lslide = new OpenLayers.Layer.WMS( 
            	"Landslide Incidence and Susceptibility", 
            	"http://geog485.unm.edu:8080/geoserver/s_jjohnso1/ows?",
            	{layers: "lsoverp020", version: '1.1.1', transparent: 'true'},
            	{isBaseLayer: false, visibility: false}
            );
            map.addLayer(Layers.lslide)
			
			
		
		Layers.costlylslides = new OpenLayers.Layer.WMS( 
            	"Costly Landslides", 
            	"http://geog485.unm.edu:8080/geoserver/s_jjohnso1/ows?",
            	{layers: "ladslx020", version: '1.1.1', transparent: 'true'},
            	{isBaseLayer: false, visibility: false}
            );
            map.addLayer(Layers.costlylslides)
			
			
			
		Layers.quakes = new OpenLayers.Layer.WMS( 
            	"Earthquakes", 
            	"http://geog485.unm.edu:8080/geoserver/s_jjohnso1/ows?",
            	{layers: "quksigx020", version: '1.1.1', transparent: 'true'},
            	{isBaseLayer: false, visibility: false}
            );
            map.addLayer(Layers.quakes)
			
			
			
		Layers.volcanoes = new OpenLayers.Layer.WMS( 
            	"Volcanoes", 
            	"http://geog485.unm.edu:8080/geoserver/s_jjohnso1/ows?",
            	{layers: "volcanx020", version: '1.1.1', transparent: 'true'},
            	{isBaseLayer: false, visibility: false}
            );
            map.addLayer(Layers.volcanoes)
            
           lslideLayer = new OpenLayers.Layer.WMS( 
            	"Landslide Incidence and Susceptibility", 
            	"http://webservices.nationalatlas.gov/wms/geology?",
            	{layers: "lslide", version: '1.3.0', transparent: 'TRUE'},
            	{isBaseLayer: false, visibility: false}
            );
            map.addLayer(lslideLayer);
            
            landslidesLayer = new OpenLayers.Layer.WMS( 
            	"Costly Landslides", 
            	"http://webservices.nationalatlas.gov/wms/geology?",
            	{layers: "landx", version: '1.1.1', transparent: 'TRUE'},
            	{isBaseLayer: false, visibility: false}
				
            );
	    map.addLayer(landslidesLayer);

    		Layers.localFeatures = new OpenLayers.Layer.Vector('Oso Landslide - Vector Features');
    		map.addLayer(Layers.localFeatures);

    		myRedPointStyle = {
    			pointRadius: 12, 
    			fillColor: "#CC0000",
    			fillOpacity: .5,
    			strokeOpacity: .5}

    		myCountiesStyle = {
    			fillColor: "#ffffff",
    			fillOpacity: .2,
    			strokeOpacity: .5,
    			strokeColor: "#ffffff"}

    		myStatesStyle = {
    			fillColor: "#0000ff",
    			fillOpacity: .2,
    			strokeOpacity: .5,
    			strokeColor: "#0000ff"}

    		myCitiesStyle = {
    			fillColor: "#00ff00",
    			fillOpacity: .2,
    			strokeOpacity: .5,
    			strokeColor: "#00ff00"}

    		myBuildingStyle = {
    			fillColor: "#88ff00",
    			fillOpacity: .2,
    			strokeOpacity: .5,
    			strokeColor: "#88ff00"}

    		myPathStyle = {
    			strokeOpacity: .8,
    			strokeColor: "#880088",
    			strokeWidth: 2}

			var Coord_mudslidecenter = new OpenLayers.Geometry.Point(-121.848003,48.28256);
    		var Coord_mudslideEnd = new OpenLayers.Geometry.Point(-121.842919,48.278823);
    		var Coord_displacedExtent = new OpenLayers.Geometry.LinearRing([
    			new OpenLayers.Geometry.Point(-121.850236,48.281859),
     			new OpenLayers.Geometry.Point(-121.849335,48.285638),
    			new OpenLayers.Geometry.Point(-121.847442, 48.285869),
    			new OpenLayers.Geometry.Point(-121.844201, 48.283831),
    			new OpenLayers.Geometry.Point(-121.843766, 48.282666),
    			new OpenLayers.Geometry.Point(-121.847657, 48.280735),
    			new OpenLayers.Geometry.Point(-121.848395, 48.281848),
   			]);
   			var Coord_mudslidePath = new OpenLayers.Geometry.LineString([
   				Coord_mudslidecenter,
     				Coord_mudslideEnd,   				
   			])
    		
    		var Point_mudslidecenter = new OpenLayers.Feature.Vector(Coord_mudslidecenter,null,myRedPointStyle);
    		var Point_mudslideEnd = new OpenLayers.Feature.Vector(Coord_mudslideEnd);
    		var LinearRing_displacedExtent = new OpenLayers.Feature.Vector(Coord_displacedExtent, null, myBuildingStyle);
    		var LineString_mudslidePath = new OpenLayers.Feature.Vector(Coord_mudslidePath, null, myPathStyle);
    		
    		Layers["localFeatures"].addFeatures([Point_mudslidecenter, Point_mudslideEnd, LinearRing_displacedExtent, LineString_mudslidePath]);
    		
			Layers.states = new OpenLayers.Layer.Vector("KML - New Mexico State", {
                projection: map.displayProjection,
                visibility: false,
                style: myStatesStyle,
                strategies: [new OpenLayers.Strategy.Fixed()],
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "http://kkb-web.s3.amazonaws.com/data/tl_2010_35_state10.kml",
                    format: new OpenLayers.Format.KML({
                        extractAttributes: true
                    })
                })
            });
           	map.addLayer(Layers.states)	
           			
			map.setCenter(
                new OpenLayers.LonLat(lon, lat), zoom
            );
            map.addControl(new OpenLayers.Control.LayerSwitcher() );
            map.addControl(new OpenLayers.Control.MousePosition() );
            map.addControl(new OpenLayers.Control.Permalink() );
            map.addControl(new OpenLayers.Control.PanZoomBar() );
               
        }
     
	</script>
	<style type="text/css">
 #map {width:90%; height:800px}
        body { color: white; background: black; }
  		  h1 { color: green }
  		  h2 { color: red }
  		  body { margin-left: 10%; margin-right: 10%; }
  		  h1 { margin-left: -8%;}
   		  h2 { margin-left: -4%; }
                  html { height: 100% }
	</style>
  </head>
	<body onload="init()">
	<p>
	James Johnson<br>
	</p>
	<h1>Milestone #9</h1>
	<p>In the wake of the landslide in Washington I thought it would be interesting to address landslides with my map.</p>
	<li>Oso Landslide Vector Features - The green polygon shows the extent of the displaced land. The line is the path of the debris flow (zoom in to see). </li>
	<li>KML - New Mexico State - To get a good idea of landslide danger locations in NM.</li>	
	<li>Landslide Incidence and Susceptibility - WMS layer showing landslide danger zones accross the United States.</li>
	<li>Costly Landslides - Shows the points of all landslides accross the country that were costly incidents.</li>	
	
	<div id="map"></div>
	<img src=http://webservices.nationalatlas.gov/wms?version=1.3.0&service=WMS&request=GetLegendGraphic&sld_version=1.1.0&layer=lslide&format=image/png&STYLE=default /></a> <img src=http://webservices.nationalatlas.gov/wms?version=1.3.0&service=WMS&request=GetLegendGraphic&sld_version=1.1.0&layer=landx&format=image/png&STYLE=default /></a>
	</body>
	
	
		<FORM METHOD="LINK" ACTION="http://jjohnson283.github.io/geog485/index.html">
<INPUT TYPE="submit" VALUE="Back to Home">
</FORM>
</html>
